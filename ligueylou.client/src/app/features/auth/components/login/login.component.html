<div class="flex flex-col min-h-screen">

  <!-- HEADER -->
  <header class="w-full border-b bg-white">
    <div class="container mx-auto flex h-16 items-center px-4">
      <a routerLink="/" class="flex items-center gap-2">
        <svg class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-width="2" d="M12 2l9 4v6c0 5-3.5 9.74-9 11-5.5-1.26-9-6-9-11V6l9-4z" />
        </svg>
        <span class="text-xl font-bold">LIGUEYLU</span>
      </a>
    </div>
  </header>

  <!-- MAIN -->
  <main class="flex-1 flex items-center justify-center py-12 bg-gradient-to-r from-green-50 to-emerald-50">
    <div class="container px-4 flex justify-center">
      <div class="card w-full max-w-md bg-white shadow-xl">

        <!-- Card Header -->
        <div class="card-body">
          <h2 class="text-2xl font-bold text-center mb-2">Connexion</h2>
          <p class="text-center text-gray-500 mb-8">
            Connectez-vous pour acc√©der √† vos services et r√©servations
          </p>

          <!-- Tabs using DaisyUI -->
          <div class="mb-8">
            <div class="tabs tabs-boxed bg-gray-100 p-1 w-full grid grid-cols-2">
              <input type="radio"
                     name="login_tabs"
                     class="tab"
                     aria-label="Email"
                     [checked]="activeTab === 'email'"
                     (change)="setActiveTab('email')" />
              <input type="radio"
                     name="login_tabs"
                     class="tab"
                     aria-label="T√©l√©phone"
                     [checked]="activeTab === 'phone'"
                     (change)="setActiveTab('phone')" />
            </div>
          </div>

          <!-- EMAIL FORM -->
          @if (activeTab === 'email') {
          <div class="mt-2">
            <form (ngSubmit)="handleEmailLogin()" #emailForm="ngForm">
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                  <input type="email"
                         placeholder="exemple@email.com"
                         class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                         [(ngModel)]="formData.email"
                         name="email"
                         required
                         [disabled]="loading" />
                </div>

                <div>
                  <div class="flex justify-between items-center mb-2">
                    <label class="block text-sm font-medium text-gray-700">Mot de passe</label>
                    <a routerLink="/forgot-password" class="text-sm text-green-600 hover:text-green-700 hover:underline">
                      Mot de passe oubli√© ?
                    </a>
                  </div>
                  <div class="relative">
                    <input [type]="showPassword ? 'text' : 'password'"
                           class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent pr-12"
                           [(ngModel)]="formData.password"
                           name="password"
                           required
                           [disabled]="loading" />
                    <button type="button"
                            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
                            (click)="togglePasswordVisibility()">
                      @if (!showPassword) {
                      <span class="text-lg">üëÅÔ∏è</span>
                      }
                      @if (showPassword) {
                      <span class="text-lg">üôà</span>
                      }
                    </button>
                  </div>
                </div>

                <div class="flex items-center gap-3">
                  <input type="checkbox"
                         id="remember"
                         class="w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"
                         [(ngModel)]="formData.remember"
                         name="remember" />
                  <label for="remember" class="text-sm text-gray-700">Se souvenir de moi</label>
                </div>

                <button type="submit"
                        class="w-full py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition duration-200"
                        [disabled]="loading || emailForm.invalid">
                  @if (loading) {
                  <div class="flex items-center justify-center">
                    <div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"></div>
                    Connexion...
                  </div>
                  } @else {
                  Se connecter
                  }
                </button>
              </div>
            </form>
          </div>
          }

          <!-- PHONE FORM -->
          @if (activeTab === 'phone') {
          <div class="mt-2">
            <form (ngSubmit)="handlePhoneLogin()" #phoneForm="ngForm">
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">T√©l√©phone</label>
                  <input type="tel"
                         placeholder="77 123 45 67"
                         class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                         [(ngModel)]="formData.phone"
                         name="phone"
                         required
                         [disabled]="loading" />
                </div>

                <button type="submit"
                        class="w-full py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition duration-200"
                        [disabled]="loading || phoneForm.invalid">
                  @if (loading) {
                  <div class="flex items-center justify-center">
                    <div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"></div>
                    Envoi...
                  </div>
                  } @else {
                  Recevoir un code
                  }
                </button>
              </div>
            </form>
          </div>
          }

          <!-- Divider -->
          <div class="my-8">
            <div class="flex items-center">
              <div class="flex-grow border-t border-gray-300"></div>
              <span class="mx-4 text-sm text-gray-500">Ou continuer avec</span>
              <div class="flex-grow border-t border-gray-300"></div>
            </div>
          </div>

          <!-- Social Login -->
          <div class="grid grid-cols-2 gap-4 mb-6">
            <button class="flex items-center justify-center gap-2 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-200"
                    (click)="loginWithFacebook()"
                    [disabled]="loading">
              <span class="text-lg">üëç</span>
              <span>Facebook</span>
            </button>
            <button class="flex items-center justify-center gap-2 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-200"
                    (click)="loginWithTwitter()"
                    [disabled]="loading">
              <span class="text-lg">üê¶</span>
              <span>Twitter</span>
            </button>
          </div>

          <!-- Footer inside card -->
          <div class="text-center text-sm text-gray-600">
            Vous n'avez pas de compte ?
            <a routerLink="/register" class="text-green-600 font-medium hover:text-green-700 hover:underline ml-1">
              S'inscrire
            </a>
          </div>

          <div class="text-center text-sm mt-3">
            <a routerLink="/admin/login" class="text-red-600 font-medium hover:text-red-700 hover:underline">
              Acc√®s administrateur
            </a>
          </div>

        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="w-full py-6 bg-white border-t">
    <div class="container mx-auto px-4 md:px-6">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <p class="text-sm text-gray-500">¬© {{ currentYear }} LIGUEYLU. Tous droits r√©serv√©s.</p>

        <div class="flex space-x-4 mt-4 md:mt-0 text-gray-500">
          <a class="hover:text-green-600 cursor-pointer hover:underline">Conditions d'utilisation</a>
          <a class="hover:text-green-600 cursor-pointer hover:underline">Politique de confidentialit√©</a>
          <a class="hover:text-green-600 cursor-pointer hover:underline">Aide</a>
        </div>
      </div>
    </div>
  </footer>

</div>
