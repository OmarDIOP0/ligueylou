<div class="flex flex-col min-h-screen">

  <!-- HEADER -->
  <header class="w-full border-b bg-white">
    <div class="container mx-auto flex h-16 items-center px-4">
      <a routerLink="/" class="flex items-center gap-2">
        <svg class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-width="2" d="M12 2l9 4v6c0 5-3.5 9.74-9 11-5.5-1.26-9-6-9-11V6l9-4z" />
        </svg>
        <span class="text-xl font-bold">LIGUEYLU</span>
      </a>
    </div>
  </header>

  <!-- MAIN -->
  <main class="flex-1 flex items-center justify-center py-12 bg-gradient-to-r from-green-50 to-emerald-50">
    <div class="container px-4 flex justify-center">
      <div class="card w-full max-w-md bg-white shadow-xl">

        <!-- Card Header -->
        <div class="card-body">
          <h2 class="text-2xl font-bold text-center mb-2">Cr√©er un compte</h2>
          <p class="text-center text-gray-500 mb-8">
            Inscrivez-vous pour acc√©der √† tous les services de LIGUEYLU
          </p>

          <!-- Tabs using DaisyUI -->
          <div class="mb-8">
            <div class="tabs tabs-box p-1 w-full grid grid-cols-2">
              <input type="radio"
                     name="register_tabs"
                     class="tab"
                     aria-label="Client"
                     [checked]="activeTab === 'client'"
                     (change)="setActiveTab('client')" />
              <input type="radio"
                     name="register_tabs"
                     class="tab"
                     aria-label="Prestataire"
                     [checked]="activeTab === 'provider'"
                     (change)="setActiveTab('provider')" />
            </div>
          </div>

          <!-- CLIENT FORM -->
          @if (activeTab === 'client') {
          <div class="mt-2">
            <form (ngSubmit)="handleClientSubmit()" #clientForm="ngForm">
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Nom complet</label>
                  <input type="text"
                         placeholder="Pr√©nom Nom"
                         class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                         [(ngModel)]="clientFormData.nomComplet"
                         name="nomComplet"
                         required
                         [disabled]="loading" />
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                  <input type="email"
                         placeholder="exemple@email.com"
                         class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                         [(ngModel)]="clientFormData.email"
                         name="email"
                         required
                         [disabled]="loading" />
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">T√©l√©phone</label>
                  <input type="tel"
                         placeholder="77123456"
                         class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                         [(ngModel)]="clientFormData.phone"
                         name="phone"
                         required
                         [disabled]="loading" />
                  <p class="text-xs text-gray-500 mt-1">Entre 7 et 9 chiffres</p>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Mot de passe</label>
                  <div class="relative">
                    <input [type]="showPassword ? 'text' : 'password'"
                           class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent pr-12"
                           [(ngModel)]="clientFormData.password"
                           name="password"
                           required
                           [disabled]="loading" />
                    <button type="button"
                            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
                            (click)="togglePasswordVisibility()">
                      @if (!showPassword) {
                      <span class="text-lg">üëÅÔ∏è</span>
                      }
                      @if (showPassword) {
                      <span class="text-lg">üôà</span>
                      }
                    </button>
                  </div>
                  <p class="text-xs text-gray-500 mt-1">Alphanum√©rique, 8-20 caract√®res</p>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Confirmer le mot de passe</label>
                  <div class="relative">
                    <input [type]="showConfirmPassword ? 'text' : 'password'"
                           class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent pr-12"
                           [(ngModel)]="clientFormData.confirmPassword"
                           name="confirmPassword"
                           required
                           [disabled]="loading" />
                    <button type="button"
                            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
                            (click)="toggleConfirmPasswordVisibility()">
                      @if (!showConfirmPassword) {
                      <span class="text-lg">üëÅÔ∏è</span>
                      }
                      @if (showConfirmPassword) {
                      <span class="text-lg">üôà</span>
                      }
                    </button>
                  </div>
                </div>

                <div class="flex items-center gap-3">
                  <input type="checkbox"
                         id="terms"
                         class="w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"
                         [(ngModel)]="clientFormData.acceptTerms"
                         name="acceptTerms"
                         required />
                  <label for="terms" class="text-sm text-gray-700">
                    J'accepte les
                    <a href="#" class="text-green-600 hover:text-green-700 hover:underline">conditions d'utilisation</a>
                    et la
                    <a href="#" class="text-green-600 hover:text-green-700 hover:underline">politique de confidentialit√©</a>
                  </label>
                </div>

                <button type="submit"
                        class="w-full py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition duration-200"
                        [disabled]="loading || clientForm.invalid">
                  @if (loading) {
                  <div class="flex items-center justify-center">
                    <div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"></div>
                    Inscription...
                  </div>
                  } @else {
                  S'inscrire
                  }
                </button>
              </div>
            </form>
          </div>
          }

          <!-- PROVIDER FORM -->
          @if (activeTab === 'provider') {
          <div class="mt-2">
            <form (ngSubmit)="handleProviderSubmit()" #providerForm="ngForm">
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Nom complet</label>
                  <input type="text"
                         placeholder="Pr√©nom Nom"
                         class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                         [(ngModel)]="providerFormData.nomComplet"
                         name="nomComplet"
                         required
                         [disabled]="loading" />
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                  <input type="email"
                         placeholder="exemple@email.com"
                         class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                         [(ngModel)]="providerFormData.email"
                         name="email"
                         required
                         [disabled]="loading" />
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">T√©l√©phone</label>
                  <input type="tel"
                         placeholder="77123456"
                         class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                         [(ngModel)]="providerFormData.phone"
                         name="phone"
                         required
                         [disabled]="loading" />
                  <p class="text-xs text-gray-500 mt-1">Entre 7 et 9 chiffres</p>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Mot de passe</label>
                  <div class="relative">
                    <input [type]="showPassword ? 'text' : 'password'"
                           class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent pr-12"
                           [(ngModel)]="providerFormData.password"
                           name="password"
                           required
                           [disabled]="loading" />
                    <button type="button"
                            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
                            (click)="togglePasswordVisibility()">
                      @if (!showPassword) {
                      <span class="text-lg">üëÅÔ∏è</span>
                      }
                      @if (showPassword) {
                      <span class="text-lg">üôà</span>
                      }
                    </button>
                  </div>
                  <p class="text-xs text-gray-500 mt-1">Alphanum√©rique, 8-20 caract√®res</p>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Confirmer le mot de passe</label>
                  <div class="relative">
                    <input [type]="showConfirmPassword ? 'text' : 'password'"
                           class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent pr-12"
                           [(ngModel)]="providerFormData.confirmPassword"
                           name="confirmPassword"
                           required
                           [disabled]="loading" />
                    <button type="button"
                            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
                            (click)="toggleConfirmPasswordVisibility()">
                      @if (!showConfirmPassword) {
                      <span class="text-lg">üëÅÔ∏è</span>
                      }
                      @if (showConfirmPassword) {
                      <span class="text-lg">üôà</span>
                      }
                    </button>
                  </div>
                </div>

                <!-- Note pour prestataire -->
                <div class="bg-yellow-50 border border-yellow-200 p-3 rounded-lg">
                  <p class="text-sm text-yellow-800">
                    <strong>Note:</strong> Votre compte prestataire sera activ√© apr√®s validation par un administrateur.
                  </p>
                </div>

                <div class="flex items-center gap-3">
                  <input type="checkbox"
                         id="provider-terms"
                         class="w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"
                         [(ngModel)]="providerFormData.acceptTerms"
                         name="acceptTerms"
                         required />
                  <label for="provider-terms" class="text-sm text-gray-700">
                    J'accepte les
                    <a href="#" class="text-green-600 hover:text-green-700 hover:underline">conditions d'utilisation</a>
                    et la
                    <a href="#" class="text-green-600 hover:text-green-700 hover:underline">politique de confidentialit√©</a>
                  </label>
                </div>

                <button type="submit"
                        class="w-full py-3 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg transition duration-200"
                        [disabled]="loading || providerForm.invalid">
                  @if (loading) {
                  <div class="flex items-center justify-center">
                    <div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"></div>
                    Inscription...
                  </div>
                  } @else {
                  S'inscrire comme prestataire
                  }
                </button>
              </div>
            </form>
          </div>
          }

          <!-- Footer inside card -->
          <div class="text-center text-sm text-gray-600 mt-8">
            Vous avez d√©j√† un compte ?
            <a routerLink="/login" class="text-green-600 font-medium hover:text-green-700 hover:underline ml-1">
              Se connecter
            </a>
          </div>

        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="w-full py-6 bg-white border-t">
    <div class="container mx-auto px-4 md:px-6">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <p class="text-sm text-gray-500">¬© {{ currentYear }} LIGUEYLU. Tous droits r√©serv√©s.</p>

        <div class="flex space-x-4 mt-4 md:mt-0 text-gray-500">
          <a class="hover:text-green-600 cursor-pointer hover:underline">Conditions d'utilisation</a>
          <a class="hover:text-green-600 cursor-pointer hover:underline">Politique de confidentialit√©</a>
          <a class="hover:text-green-600 cursor-pointer hover:underline">Aide</a>
        </div>
      </div>
    </div>
  </footer>

</div>
